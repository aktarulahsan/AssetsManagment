@model AssetsManagment.Models.StockGroup
 
 <div class="form-horizontal">

    <div>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#stockGroup" role="tab" aria-controls="home" aria-selected="true">Stock Group</a>
            </li>
            <li class="nav-item">
                <a class="nav-link  " id="packViewTab" onclick="packViewTab()" data-toggle="tab" href="#menu1" role="tab" aria-controls="profile" aria-selected="false">Unit</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="messages-tab" onclick="LocationViewTab()" data-toggle="tab" href="#menu2" role="tab" aria-controls="messages" aria-selected="false">Location</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="settings-tab" onclick="ItemViewTab()" data-toggle="tab" href="#menu3" role="tab" aria-controls="settings" aria-selected="false">Items</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="settings-tab" onclick="DepartmentViewTab()" data-toggle="tab" href="#menu4" role="tab" aria-controls="Department" aria-selected="false">Department</a>
            </li>
        </ul>
        <div class="tab-content">
            <div id="stockGroup" class="tab-pane active">


                <div class="col-md-12">
                    <div>
                        <div class="form-group">
                            <form>
                                <div class="row">
                                    <div class="form-group col-md-3 ">
                                        <label for="EmployeeId">Name</label>
                                        <input type="text" class="form-control" id="StockGroupName" placeholder="Name" />
                                    </div>
                                    <div class="form-group col-md-3 ">
                                        <label for="Name">Under</label>
                                        <select id="Under" class="form-control" aria-describedby="basic-addon2">
                                            
                                        </select>

                                       


                                        @*<input type="text" class="form-control" id="Under" placeholder="Under" />*@
                                    </div>

                                    @*<div class="form-group col-md-3 ">
                                        <label for="State">State</label>
                                        <input type="text" class="form-control" id="State" name="State" placeholder="Status" />
                                    </div>*@
                                    <div class="form-group col-md-3 ">
                                        <label for="EmployeeId">Status</label>
                                        <select id="gStatus" class="form-control" aria-describedby="basic-addon2">
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                       
                                    </div>
                                    
                                </div>

                                <div class="modal-footer justify-content-center" >

                                    <span><input type="button" class="btn btn-primary" id="btnStockAdds" onclick="return saveOrUpdate();" value="Save"></input></span>
                                    <span><input type="button" class="btn btn-primary" id="btnAdds" onclick="return cleardatda();" value="Clear"></input></span>

                                </div>

                            </form>
                        </div>
                    </div>


                    @*<div class="modal-footer">
                        <input type="button" class="btn btn-primary" id="btnAdd" onclick="return saveStockGroup();" value="Add"></input>
                    </div>*@
                        @*<button type="button" class="btn btn-primary" id="clear" onclick="return showdataTable();">gridview</button>
                            <button type="button" class="btn btn-primary" id="btnAdd" onclick="return getSotckGrouplist();">Update New</button>*@
                        @*<button type="button" class="btn btn-primary" id="btnAdd" onclick="return Calculetion();">Calculetion</button>
                            <button type="button" class="btn btn-primary" id="btnUpdate" style="display:none;" onclick="Update();">Update</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>*@
                    

                </div>
                <div>
                    <table id="datatable" class="table table-striped table-bordered" style="width:100%"></table>
                </div>

             
            </div>
            <div id="menu1" class="tab-pane fade">

                <br />
                <h1>aktarul</h1>
                <div id="menu1">
                </div>


            </div>
            <div id="menu2" class="tab-pane fade">
                <h3>Menu 2</h3>
                <div id="menu2">
                </div>
            </div>
            <div id="menu3" class="tab-pane fade">
                <div id="menu3">
                </div>
            </div>
            <div id="menu4" class="tab-pane fade">
                <div id="menu4">
                </div>
            </div>
        </div>

    </div>

     
</div>


<div class="modal-footer">
  
</div>




<div>
    @Html.ActionLink("Back to List", "Index")
</div>

<script>

    function packViewTab() {
        
        //$('.common-button').show();
        //$('.common-button-print').hide();
        //$('.common-button-update').hide();
        $.ajax({
            url: '/PackSize/Index',
            type: 'GET',
            //data: { StudentIdC: studentIdC },
            dataType: 'html',
            contentType: 'application/json',
            success: function (data) {
                $('#menu1').html(data);
                //Spiner.hide();
            },
            error: function (ex) {
                //alert(ex);
                //Spiner.hide();
            }
        });

    }


    function LocationViewTab() {
        
        $.ajax({
            url: '/Location/Index',
            type: 'GET',
            //data: { StudentIdC: studentIdC },
            dataType: 'html',
            contentType: 'application/json',
            success: function (data) {
                $('#menu2').html(data);
                //Spiner.hide();
            },
            error: function (ex) {
                //alert(ex);
                //Spiner.hide();
            }
        });
    }
    
    function ItemViewTab() {
 
        $.ajax({
            url: '/Item/Index',
            type: 'GET',
            //data: { StudentIdC: studentIdC },
            dataType: 'html',
            contentType: 'application/json',
            success: function (data) {
                $('#menu3').html(data);
                //Spiner.hide();
            },
            error: function (ex) {
                //alert(ex);
                //Spiner.hide();
            }
        });
    }

    function DepartmentViewTab() {

        $.ajax({
            url: '/Department/Index',
            type: 'GET',
            //data: { StudentIdC: studentIdC },
            dataType: 'html',
            contentType: 'application/json',
            success: function (data) {
                $('#menu4').html(data);
                //Spiner.hide();
            },
            error: function (ex) {
                //alert(ex);
                //Spiner.hide();
            }
        });
    }



    $(".menu1").click(function () {
        //$('#idAdd').attr('onclick', 'AddTour();');
        //$('#Update').attr('onclick', 'UpdateTour();');
        //cleardatda()
        alert("sdf")
        //$('.common-button').show();
        //$('.common-button-print').hide();
        //$('.common-button-update').hide();
        $.ajax({
            url: '/PackSize/Index',
            type: 'GET',
            //data: { StudentIdC: studentIdC },
            dataType: 'html',
            contentType: 'application/json',
            success: function (data) {
                $('#menu1').html(data);
                //Spiner.hide();
            },
            error: function (ex) {
                //alert(ex);
                //Spiner.hide();
            }
        });
       
    });



 


    var selectdata = "";

    function saveOrUpdate() {
       
        var btn = $('#btnStockAdds').val()
        

        if (btn == "Save") {
            saveStockGroup();

        } else {
           
            UpdateStockGroup(selectdata.SERIAL);
        }
    }
  

    function saveStockGroup() {
       
        var empObj = {
            NAME: $('#StockGroupName').val(),
            PARENT: $('#Under').val(),
            G_STATUS: $('#gStatus').val(),
         
        };

        $.ajax({
            url: "/StockGroup/Create",
            data: JSON.stringify(empObj),
            type: "POST",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (result) {
    
                if (result == "Ok") {
                    cleardatda();
                    showGrid();
                };
            
            }
        });

    }

    function UpdateStockGroup(sl) {
    alert(sl)
        var empObj = {

            NAME: $('#StockGroupName').val(),
            PARENT: $('#Under').val(),
            G_STATUS: $('#gStatus').val(),
            SERIAL: selectdata.SERIAL,

        
        };
        alert(empObj)

        $.ajax({
            url: "/StockGroup/Update",
            data: JSON.stringify(empObj),
            type: "POST",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (result) {
                //alert(result)
                //loadData();
                //$('#myModal').modal('hide');
                if (result == "Ok") {
                    cleardatda();
                    showGrid();

                    //alert("save data")
                    //$('.nav-tabs a[href="#tabLeaveApplicationList"]').tab('show');


                };
                //error: function (errormessage) {
                //    alert(errormessage.responseText);
                //}

            }
        });

    }


    

    $(".btnHODNotApproved").on("click", function () {

        alert(" ok");

        $.ajax({
            type: "GET",
            url: "/StockGroup/mFillStockGroupList",
            data: JSON.stringify(leaveList),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (r) {
                alert(r + " record(s) inserted.");
            }
        });


    });

    function cleardatda() {

        $("#datatable").dataTable().fnDestroy();
        $('#StockGroupName').val("");
        $('#Under').val("");
        $('#gStatus').val("");
        $('#btnStockAdds').val("Save");
     
    }



    var editor;

    $(document).ready(function () {
        showGrid();
        //setInterval(function () {
        //    $("#datatable").dataTable().fnDestroy();
        //    showGrid();
        //}, 5000);  // it reload after 5 second 

        $(".nav-tabs a").click(function () {
            $(this).tab('show');
        });

        $('#button').click(function () {
            table.row('.selected').remove().draw(false);
        });

        getUnderList();


 
       

    });


    function getUnderList() {

        $.ajax({
            url: '/StockGroup/getUnderList',
            type: 'GET',
            data: "{}",
            success: function (data) {
                console.log('hello delete dataddddddddd', data);
                var s = '<option value="-1">Please Select a Under Group</option>';  
                for (var i = 0; i < data.length; i++) {  
                    s += '<option value="' + data[i].SERIAL + '">' + data[i].NAME + '</option>';
                }  
                $("#Under").html(s);
            }  ,
            //success: function (data) {

            //    alert(data);
            //    //$('#menu2').html(data);
            //    //Spiner.hide();
            //},
            error: function (ex) {
                //alert(ex);
                //Spiner.hide();
            }
        });
    }


    function showGrid() {
        $('#datatable').DataTable({
            "bDestroy": true,
            "processing": true,
            "orderMulti": false, // for disable multiple column at once  
            "scrollX": true,

            "deferRender": true,
            "ajax": {
                "url": "/StockGroup/GetLeaveEditkey",
                "type": "POST",
                "datatype": "json",
                "dataSrc": function (response) {
                    // Settings.
                    response.draw = response.data.draw;
                    response.recordsTotal = response.recordsTotal;
                    response.recordsFiltered = response.recordsFiltered;
                    console.log('request.responseText', response.data);
                    return response.data;
                }
            },


            "order": [[0, 'asc']],
            "columns": [
                {
                    title: 'SL',
                    render: function (
                        data,
                        type,
                        row,
                       meta
                    ) {
                        return '<span>' + (meta.row + 1) + '</span>';
                    },
                },
                {
                    title: 'SERIAL',
                    data: 'SERIAL',
                    name: 'SERIAL',
                },

                 {
                     title: 'Name',
                     data: 'NAME',
                     name: 'NAME',
                 },
                
                  {
                      title: 'Parent',
                      data: 'PARENT',
                      name: 'PARENT',
                      },
                  {
                      title: 'Status',
                      data: 'G_STATUS',
                      
                      render: function(data) {
                        return data == 1 ? "Active" : "Inactive"
                      }
                  },

                  //{
                  //    data: null,
                  //    className: "dt-center editor-edit",
                  //    defaultContent: '<i class="fa fa-pencil"/>',
                  //    orderable: false
                  //},
                  //{
                  //    data: null,
                  //    className: "dt-center editor-delete",
                  //    defaultContent: '<i class="fa fa-trash"/>',
                  //    orderable: false
                  //},

                   {
                       render: function (data, type, row) {
                           return '<button class="btn btn-info fontsize  sales-sloat-ak">   <i class="fa fa-pencil"></i></button>' + "&nbsp" + '<button class="btn btn-danger fontsize  delete-sloat-ak"> <i class="fa fa-trash"></i></button>';
                       }
                   },

                     //{
                     //    render: function (data, type, row) {
                     //        return '<button class="btnPrintAllResult gotoResultEntry btn btn-success"><i class="fa fa-trash"></i> </button>';
                     //    }
                     //},



            ],


            "responsive": false,
            "select": true,
            "rowCallback": function (row, data) {


                //$(row)
                //  .find('.booked-sloat')
                //  .click(function () {
                //      console.log('hello delete data', data);
                //      //rerender();
                //  });

                $(row)
                 .bind('click')
                 .click(function () {

                     selectdata = data;
                     console.log('hello delete dataddddddddd', selectdata);
                     //rerender();
                 });
                $(row).find(".sales-sloat-ak").click(function () {
                    selectdata = data;
                    edit(selectdata);
                    //that.salesss(data);
                    //that.rerender();
                });
                $(row).find(".delete-sloat-ak").click(function () {
                    selectdata = data;
                    deletef(selectdata.SERIAL)
                    //that.salesss(data);
                    //that.rerender();
                });

            }

        });
    }

    function deletef(id){
        //alert(id);

     
        //alert(empObj)
        //alert(id);

        $.ajax({
            url: "/StockGroup/DeleteG?id=" + id,
            //data: JSON.stringify(empObj),
            type: "POST",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (result) {
                alert(result)
                //loadData();
                //$('#myModal').modal('hide');
                if (result == "OK") {
                   
                    cleardatda();
                    showGrid();

                    //alert("save data")
                    //$('.nav-tabs a[href="#tabLeaveApplicationList"]').tab('show');


                };
                //error: function (errormessage) {
                //    alert(errormessage.responseText);
                //}

            }
        });


    }

    function edit(selectdata) {
        //alert(selectdata.NAME)
        $('#StockGroupName').val(selectdata.NAME);
        $('#Under').val(selectdata.PARENT);
        $('#gStatus').val(selectdata.G_STATUS);
        //$('#ddlCategory').val(selectdata.G_STATUS);
        $('#btnStockAdds').val("Update");




    }

</script>
